<div class="waiting-room">
    <h1>Attente de partie - League of Versions</h1>

    <h2>Code d'accÃ¨s : {{ accessCode$ | async }}</h2>
    @if (isLocked$ | async) { ::: ðŸ”’ Salle verrouillÃ©e ::: } @else { ::: ðŸ”“ Salle dÃ©verrouillÃ©e ::: }

    <div class="players-list">
        <h3>Joueurs :</h3>
        <ul>
            @for(player of players$ | async; track player.name) {
            <li [ngClass]="{ organizer: player.isOrganizer }">
                <img [src]="player.avatar.headImage" alt="Avatar" />
                <span>{{ player.name }}</span>
                @if((this.gameService.character$ | async)?.isOrganizer && !player.isOrganizer) {
                <button class="dark-button" type="button" (click)="kickPlayer(player)">Expulser</button>
                }
            </li>
            }
        </ul>
    </div>
    @if((this.gameService.character$ | async)?.isOrganizer) {
    <div class="admin-buttons">
        <button class="dark-button" type="button" (click)="addVirtualPlayers()" [disabled]="isMaxPlayer">Ajouter un joueur virtuel</button>
        <button class="dark-button" type="button" (click)="lockRoom()">Verouiller la salle</button>
        <button class="dark-button" type="button" (click)="unlockRoom()">Deverouiller la salle</button>
        <button class="dark-button" type="button" (click)="playGame()" [disabled]="(isLocked$ | async) === false">Lancer la partie!</button>
    </div>
    } @if(isMaxPlayer) {
    <div class="error">Le nombre maximum de joueurs est atteint !</div>
    }

    <div>
        <button class="dark-button" type="button" (click)="playerLeave()">Quitter la partie</button>
    </div>

    <app-clavardage></app-clavardage>
</div>
